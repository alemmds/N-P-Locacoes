<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Cadastro</title>
    <style>
        .item {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 10px;
        }
        .header {
            font-weight: bold;
            cursor: pointer;
        }
        .details {
            display: none;
        }
        .expanded .details {
            display: block;
        }
        .edit-button, .delete-button {
            margin-left: 10px;
        }
    </style>
</head>
<body>

    <div id="maquinas" class="section">
        <form id="formMaquinas" onsubmit="addOrUpdateItem(event, 'maquinas', 'nomeMaquina', ['serieMaquina', 'anosUsoMaquina', 'horimetroMaquina', 'ultimaManutencaoMaquina', 'dataEntradaMaquina'])">
            <input type="text" id="nomeMaquina" placeholder="Nome da Máquina">
            <input type="text" id="serieMaquina" placeholder="Série">
            <input type="number" id="anosUsoMaquina" placeholder="Anos de Uso">
            <input type="number" id="horimetroMaquina" placeholder="Horímetro">
            <input type="date" id="ultimaManutencaoMaquina" placeholder="Última Manutenção">
            <input type="date" id="dataEntradaMaquina" placeholder="Data de Entrada">
            <button type="submit">Confirmar</button>
        </form>
        <div id="maquinasList"></div>
    </div>

    <div id="contas" class="section">
        <form id="formContas" onsubmit="addOrUpdateItem(event, 'contas', 'nomeConta', ['tipoConta', 'saldoConta'])">
            <input type="text" id="nomeConta" placeholder="Nome da Conta">
            <input type="text" id="tipoConta" placeholder="Tipo da Conta">
            <input type="number" id="saldoConta" placeholder="Saldo">
            <button type="submit">Confirmar</button>
        </form>
        <div id="contasList"></div>
    </div>

    <div id="recebimentos" class="section">
        <form id="formRecebimentos" onsubmit="addOrUpdateItem(event, 'recebimentos', 'descricaoRecebimento', ['valorRecebimento', 'dataRecebimento'])">
            <input type="text" id="descricaoRecebimento" placeholder="Descrição do Recebimento">
            <input type="number" id="valorRecebimento" placeholder="Valor">
            <input type="date" id="dataRecebimento" placeholder="Data de Recebimento">
            <button type="submit">Confirmar</button>
        </form>
        <div id="recebimentosList"></div>
    </div>

    <div id="contratos" class="section">
        <form id="formContratos" onsubmit="addOrUpdateItem(event, 'contratos', 'nomeContrato', ['locatarioContrato', 'cnpjContrato', 'representanteContrato', 'periodoContrato', 'valorContrato', 'dataTerminoContrato', 'equipamentoContrato'])">
            <input type="text" id="nomeContrato" placeholder="Nome do Contrato">
            <input type="text" id="locatarioContrato" placeholder="Locatário">
            <input type="text" id="cnpjContrato" placeholder="CNPJ">
            <input type="text" id="representanteContrato" placeholder="Representante">
            <input type="text" id="periodoContrato" placeholder="Período">
            <input type="number" id="valorContrato" placeholder="Valor">
            <input type="date" id="dataTerminoContrato" placeholder="Data de Término">
            <input type="text" id="equipamentoContrato" placeholder="Equipamento">
            <button type="submit">Confirmar</button>
        </form>
        <div id="contratosList"></div>
    </div>

    <div id="empresas" class="section">
        <form id="formEmpresas" onsubmit="addOrUpdateItem(event, 'empresas', 'nomeEmpresa', ['cnpjEmpresa', 'enderecoEmpresa'])">
            <input type="text" id="nomeEmpresa" placeholder="Nome da Empresa">
            <input type="text" id="cnpjEmpresa" placeholder="CNPJ">
            <input type="text" id="enderecoEmpresa" placeholder="Endereço">
            <button type="submit">Confirmar</button>
        </form>
        <div id="empresasList"></div>
    </div>

    <script>
        // Carregar itens do localStorage ao iniciar
        document.addEventListener('DOMContentLoaded', () => {
            ['maquinas', 'contas', 'recebimentos', 'contratos', 'empresas'].forEach(key => {
                const listId = key + 'List';
                const nameField = key === 'maquinas' ? 'nomeMaquina' :
                                  key === 'contas' ? 'nomeConta' :
                                  key === 'recebimentos' ? 'descricaoRecebimento' :
                                  key === 'contratos' ? 'nomeContrato' : 'nomeEmpresa';
                const otherFields = key === 'maquinas' ? ['serieMaquina', 'anosUsoMaquina', 'horimetroMaquina', 'ultimaManutencaoMaquina', 'dataEntradaMaquina'] :
                                    key === 'contas' ? ['tipoConta', 'saldoConta'] :
                                    key === 'recebimentos' ? ['valorRecebimento', 'dataRecebimento'] :
                                    key === 'contratos' ? ['locatarioContrato', 'cnpjContrato', 'representanteContrato', 'periodoContrato', 'valorContrato', 'dataTerminoContrato', 'equipamentoContrato'] :
                                    ['cnpjEmpresa', 'enderecoEmpresa'];

                const storedItems = JSON.parse(localStorage.getItem(key)) || [];
                renderItems(listId, storedItems, nameField, otherFields, key);
            });
        });

        function renderItems(listId, items, nameField, otherFields, section) {
            const list = document.getElementById(listId);
            list.innerHTML = '';

            items.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item';

                const headerDiv = document.createElement('div');
                headerDiv.className = 'header';
                headerDiv.textContent = item[nameField];
                headerDiv.addEventListener('click', () => {
                    itemDiv.classList.toggle('expanded');
                });

                const detailsDiv = document.createElement('div');
                detailsDiv.className = 'details';
                otherFields.forEach(field => {
                    const fieldDiv = document.createElement('div');
                    fieldDiv.textContent = `${field}: ${item[field]}`;
                    detailsDiv.appendChild(fieldDiv);
                });

                const editButton = document.createElement('button');
                editButton.textContent = 'Editar';
                editButton.className = 'edit-button';
                editButton.addEventListener('click', () => editItem(section, index));

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Excluir';
                deleteButton.className = 'delete-button';
                deleteButton.addEventListener('click', () => deleteItem(section, index));

                itemDiv.appendChild(headerDiv);
                itemDiv.appendChild(detailsDiv);
                itemDiv.appendChild(editButton);
                itemDiv.appendChild(deleteButton);

                list.appendChild(itemDiv);
            });
        }

        function addOrUpdateItem(event, section, mainFieldId, otherFieldsIds) {
            event.preventDefault();

            const mainField = document.getElementById(mainFieldId).value;
            const otherFields = otherFieldsIds.reduce((acc, id) => {
                acc[id] = document.getElementById(id).value;
                return acc;
            }, {});

            const item = {
                [mainFieldId]: mainField,
                ...otherFields
            };

            let items = JSON.parse(localStorage.getItem(section)) || [];
            items.push(item);
            localStorage.setItem(section, JSON.stringify(items));

            loadDataFromLocalStorage(section);
            clearForm(`form${capitalizeFirstLetter(section)}`);
        }

        function loadDataFromLocalStorage(section) {
            const listId = section + 'List';
            const nameField = section === 'maquinas' ? 'nomeMaquina' :
                              section === 'contas' ? 'nomeConta' :
                              section === 'recebimentos' ? 'descricaoRecebimento' :
                              section === 'contratos' ? 'nomeContrato' : 'nomeEmpresa';
            const otherFields = section === 'maquinas' ? ['serieMaquina', 'anosUsoMaquina', 'horimetroMaquina', 'ultimaManutencaoMaquina', 'dataEntradaMaquina'] :
                                section === 'contas' ? ['tipoConta', 'saldoConta'] :
                                section === 'recebimentos' ? ['valorRecebimento', 'dataRecebimento'] :
                                section === 'contratos' ? ['locatarioContrato', 'cnpjContrato', 'representanteContrato', 'periodoContrato', 'valorContrato', 'dataTerminoContrato', 'equipamentoContrato'] :
                                ['cnpjEmpresa', 'enderecoEmpresa'];

            const items = JSON.parse(localStorage.getItem(section)) || [];
            renderItems(listId, items, nameField, otherFields, section);
        }

        function deleteItem(section, index) {
            let items = JSON.parse(localStorage.getItem(section));
            items.splice(index, 1);
            localStorage.setItem(section, JSON.stringify(items));
            loadDataFromLocalStorage(section);
        }

        function editItem(section, index) {
            let items = JSON.parse(localStorage.getItem(section));
            const item = items[index];

            document.getElementById(`${section}Form`).scrollIntoView();

            document.getElementById(`nome${capitalizeFirstLetter(section)}`).value = item.mainField;
            item.otherFields.forEach((field, idx) => {
                document.getElementById(`field${idx}`).value = field;
            });
        }

        function clearForm(formId) {
            document.getElementById(formId).reset();
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
    </script>
</body>
</html>