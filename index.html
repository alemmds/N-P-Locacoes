<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Sistema</title>
    <style>
        .buttons { margin-top: 10px; }
        .item { margin-bottom: 10px; padding: 10px; border: 1px solid #ccc; }
        .header { display: flex; justify-content: space-between; cursor: pointer; }
        .details { display: none; }
        .collapsed { display: none; }
        .expanded { display: block; }
        .buttons .edit-button, .buttons .delete-button { margin-right: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <button onclick="showSection('maquinasSection')">Máquinas</button>
            <button onclick="showSection('contasSection')">Contas</button>
            <button onclick="showSection('recebimentosSection')">Recebimentos</button>
            <button onclick="showSection('contratosSection')">Contratos</button>
            <button onclick="showSection('empresasSection')">Empresas</button>
        </nav>

        <div id="sections">
            <!-- Seção de Máquinas -->
            <section id="maquinasSection" class="section" style="display:none;">
                <h2>Cadastro de Máquinas</h2>
                <form id="formMaquina" onsubmit="addOrUpdateItem(event, 'maquinasList', 'nomeMaquina', ['serieMaquina', 'anosUsoMaquina'], 'maquinas')">
                    <label>Nome da Máquina:</label><input type="text" id="nomeMaquina" required><br>
                    <label>Série:</label><input type="text" id="serieMaquina" required><br>
                    <label>Anos de Uso:</label><input type="number" id="anosUsoMaquina" required><br>
                    <div class="buttons">
                        <button type="submit">Confirmar</button>
                        <button type="button" onclick="clearForm('formMaquina')">Limpar</button>
                    </div>
                </form>
                <div id="maquinasList"></div>
            </section>

            <!-- Seção de Contas -->
            <section id="contasSection" class="section" style="display:none;">
                <h2>Cadastro de Contas</h2>
                <form id="formConta" onsubmit="addOrUpdateItem(event, 'contasList', 'nomeConta', ['bancoConta', 'saldoConta'], 'contas')">
                    <label>Nome da Conta:</label><input type="text" id="nomeConta" required><br>
                    <label>Banco:</label><input type="text" id="bancoConta" required><br>
                    <label>Saldo:</label><input type="number" id="saldoConta" required><br>
                    <div class="buttons">
                        <button type="submit">Confirmar</button>
                        <button type="button" onclick="clearForm('formConta')">Limpar</button>
                    </div>
                </form>
                <div id="contasList"></div>
            </section>

            <!-- Seção de Recebimentos -->
            <section id="recebimentosSection" class="section" style="display:none;">
                <h2>Cadastro de Recebimentos</h2>
                <form id="formRecebimento" onsubmit="addOrUpdateItem(event, 'recebimentosList', 'nomeRecebimento', ['valorRecebimento', 'dataRecebimento'], 'recebimentos')">
                    <label>Nome do Recebimento:</label><input type="text" id="nomeRecebimento" required><br>
                    <label>Valor:</label><input type="number" id="valorRecebimento" required><br>
                    <label>Data:</label><input type="date" id="dataRecebimento" required><br>
                    <div class="buttons">
                        <button type="submit">Confirmar</button>
                        <button type="button" onclick="clearForm('formRecebimento')">Limpar</button>
                    </div>
                </form>
                <div id="recebimentosList"></div>
            </section>

            <!-- Seção de Contratos -->
            <section id="contratosSection" class="section" style="display:none;">
                <h2>Cadastro de Contratos</h2>
                <form id="formContrato" onsubmit="addOrUpdateItem(event, 'contratosList', 'nomeContrato', ['dataInicioContrato', 'dataTerminoContrato', 'equipamentoContrato'], 'contratos')">
                    <label>Nome do Contrato:</label><input type="text" id="nomeContrato" required><br>
                    <label>Data de Início:</label><input type="date" id="dataInicioContrato" required><br>
                    <label>Data de Término:</label><input type="date" id="dataTerminoContrato" required><br>
                    <label>Equipamento:</label><input type="text" id="equipamentoContrato" required><br>
                    <div class="buttons">
                        <button type="submit">Confirmar</button>
                        <button type="button" onclick="clearForm('formContrato')">Limpar</button>
                    </div>
                </form>
                <div id="contratosList"></div>
            </section>

            <!-- Seção de Empresas -->
            <section id="empresasSection" class="section" style="display:none;">
                <h2>Cadastro de Empresas</h2>
                <form id="formEmpresa" onsubmit="addOrUpdateItem(event, 'empresasList', 'nomeEmpresa', ['cnpjEmpresa', 'enderecoEmpresa'], 'empresas')">
                    <label>Nome da Empresa:</label><input type="text" id="nomeEmpresa" required><br>
                    <label>CNPJ:</label><input type="text" id="cnpjEmpresa" required><br>
                    <label>Endereço:</label><input type="text" id="enderecoEmpresa" required><br>
                    <div class="buttons">
                        <button type="submit">Confirmar</button>
                        <button type="button" onclick="clearForm('formEmpresa')">Limpar</button>
                    </div>
                </form>
                <div id="empresasList"></div>
            </section>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';
        }

        function clearForm(formId) {
            document.getElementById(formId).reset();
        }

        function addOrUpdateItem(event, listId, mainFieldId, fieldIds, storageKey) {
            event.preventDefault();
            const mainField = document.getElementById(mainFieldId).value;
            const fields = fieldIds.map(id => document.getElementById(id).value);

            let storedItems = JSON.parse(localStorage.getItem(storageKey)) || [];

            const item = { mainField, fields };
            storedItems.push(item);
            localStorage.setItem(storageKey, JSON.stringify(storedItems));

            renderList(listId, storageKey);
            clearForm(event.target.id);
        }

        function renderList(listId, storageKey) {
            const list = document.getElementById(listId);
            list.innerHTML = '';
            const storedItems = JSON.parse(localStorage.getItem(storageKey)) || [];

            storedItems.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('item');

                const header = document.createElement('div');
                header.classList.add('header');
                header.innerHTML = `<span>${item.mainField}</span><span class="arrow">⯈</span>`;
                header.addEventListener('click', () => toggleDetails(details, arrow));

                const details = document.createElement('div');
                details.classList.add('details', 'collapsed');
                item.fields.forEach((field, i) => {
                    const infoDiv = document.createElement('div');
                    infoDiv.classList.add('info');
                    infoDiv.textContent = `${fieldIds[i]}: ${field}`;
                    details.appendChild(infoDiv);
                });

                const arrow = header.querySelector('.arrow');

                const buttonsDiv = document.createElement('div');
                buttonsDiv.classList.add('buttons');

                const editButton = document.createElement('button');
                editButton.classList.add('edit-button');
                editButton.textContent = 'Editar';
                editButton.addEventListener('click', () => editItem(listId, index, storageKey, fieldIds));

                const deleteButton = document.createElement('button');
                deleteButton.classList.add('delete-button');
                deleteButton.textContent = 'Excluir';
                deleteButton.addEventListener('click', () => deleteItem(listId, index, storageKey));

                buttonsDiv.appendChild(editButton);
                buttonsDiv.appendChild(deleteButton);

                itemDiv.appendChild(header);
                itemDiv.appendChild(details);
                itemDiv.appendChild(buttonsDiv);

                list.appendChild(itemDiv);
            });
        }

        function toggleDetails(details, arrow) {
            if (details.classList.contains('collapsed')) {
                details.classList.remove('collapsed');
                details.classList.add('expanded');
                arrow.textContent = '⯆';
            } else {
                details.classList.remove('expanded');
                details.classList.add('collapsed');
                arrow.textContent = '⯈';
            }
        }

        function deleteItem(listId, index, storageKey) {
            let storedItems = JSON.parse(localStorage.getItem(storageKey));
            storedItems.splice(index, 1);
            localStorage.setItem(storageKey, JSON.stringify(storedItems));
            renderList(listId, storageKey);
        }

        function editItem(listId, index, storageKey, fieldIds) {
            let storedItems = JSON.parse(localStorage.getItem(storageKey));
            const item = storedItems[index];
            
            document.getElementById(fieldIds[0]).value = item.mainField;
            item.fields.forEach((field, i) => {
                document.getElementById(fieldIds[i + 1]).value = field;
            });

            deleteItem(listId, index, storageKey);
        }

        window.onload = function() {
            renderList('maquinasList', 'maquinas');
            renderList('contasList', 'contas');
            renderList('recebimentosList', 'recebimentos');
            renderList('contratosList', 'contratos');
            renderList('empresasList', 'empresas');
        };
    </script>
</body>
</html>